<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_92) on Sat Jan 06 08:54:33 PST 2018 -->
<title>AccountCollectionDistributor</title>
<meta name="date" content="2018-01-06">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AccountCollectionDistributor";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AccountCollectionDistributor.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/Account.html" title="class in com.poesys.accounting.dataloader.newaccounting"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountGroup.html" title="class in com.poesys.accounting.dataloader.newaccounting"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html" target="_top">Frames</a></li>
<li><a href="AccountCollectionDistributor.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.poesys.accounting.dataloader.newaccounting</div>
<h2 title="Class AccountCollectionDistributor" class="title">Class AccountCollectionDistributor</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.poesys.accounting.dataloader.newaccounting.AccountCollectionDistributor</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">AccountCollectionDistributor</span>
extends java.lang.Object</pre>
<div class="block"><p> Distributes a monetary amount among a set of accounts with the constraint of making the
 resulting amounts equal or differing only by a penny. This class is a type of Builder pattern:
 first construct the object, supplying the monetary amount to distribute, then add the accounts
 into which to distribute the amount, then distribute the amount, then get the current balances
 for the accounts. </p> <p> The account balances should already be equal or near-equal (different
 by at most one penny). The validate() method verifies that; the distribute method calls
 validate() and throws an exception if the current balances are not near-equal. </p> <p> This
 class abstracts the distribution process, providing a clear set of process steps that you can
 unit-test individually. It also exposes most of the logic of remainder distribution to enable
 unit testing of the logic component methods. These methods may be of interest at some point for
 use in other classes. </p></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Robert J. Muller</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#ACCOUNT_NOT_ADDED_ERROR">ACCOUNT_NOT_ADDED_ERROR</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.lang.Integer</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#amount">amount</a></span></code>
<div class="block">the amount to distribute</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.util.Map&lt;<a href="../../../../../com/poesys/accounting/dataloader/newaccounting/Account.html" title="class in com.poesys.accounting.dataloader.newaccounting">Account</a>,java.lang.Integer&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#balances">balances</a></span></code>
<div class="block">map of integer balances indexed by Account</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../com/poesys/accounting/dataloader/newaccounting/Account.html" title="class in com.poesys.accounting.dataloader.newaccounting">Account</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#firstAccount">firstAccount</a></span></code>
<div class="block">ordered list of balance accounts</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#INVALID_COLLECTION_ERROR">INVALID_COLLECTION_ERROR</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.util.Map&lt;<a href="../../../../../com/poesys/accounting/dataloader/newaccounting/Account.html" title="class in com.poesys.accounting.dataloader.newaccounting">Account</a>,java.lang.Integer&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#itemAmounts">itemAmounts</a></span></code>
<div class="block">map of decimal item credits/debit amounts indexed by Account</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static org.apache.log4j.Logger</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#logger">logger</a></span></code>
<div class="block">logger for this class</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static java.math.BigDecimal</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#MULTIPLIER">MULTIPLIER</a></span></code>
<div class="block">the multiplier that converts a BigDecimal monetary amount to integer</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#NO_AMOUNT_ERROR">NO_AMOUNT_ERROR</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#NO_BALANCE_ERROR">NO_BALANCE_ERROR</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#NO_BALANCES_ERROR">NO_BALANCES_ERROR</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#NULL_ACCOUNT_ERROR">NULL_ACCOUNT_ERROR</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#NULL_BALANCE_ERROR">NULL_BALANCE_ERROR</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static java.lang.Integer</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#PENNY">PENNY</a></span></code>
<div class="block">the amount by which accounts may differ</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#SCALE">SCALE</a></span></code>
<div class="block">the scale for BigDecimal values</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#AccountCollectionDistributor-java.math.BigDecimal-">AccountCollectionDistributor</a></span>(java.math.BigDecimal&nbsp;amount)</code>
<div class="block">Create a AccountCollectionDistributor object.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#addBalance-com.poesys.accounting.dataloader.newaccounting.Account-java.math.BigDecimal-">addBalance</a></span>(<a href="../../../../../com/poesys/accounting/dataloader/newaccounting/Account.html" title="class in com.poesys.accounting.dataloader.newaccounting">Account</a>&nbsp;account,
          java.math.BigDecimal&nbsp;balance)</code>
<div class="block">Add an account and its current balance to the balance map, converting the BigDecimal monetary
 amount (scale SCALE) into an integer amount for computation with integer arithmetic.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#distributeAmount--">distributeAmount</a></span>()</code>
<div class="block">Distribute the amount across the current set of account balances, changing the balances to the
 distributed amounts plus the original amounts.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#distributePennyFromRemainder-java.lang.Integer-">distributePennyFromRemainder</a></span>(java.lang.Integer&nbsp;remainder)</code>
<div class="block">Recursive method that distributes one penny for each recursion until the remainder is gone.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#distributeRemainder--">distributeRemainder</a></span>()</code>
<div class="block">Distribute the number of pennies remaining after the main distribution across the current set
 of account balances, keeping the balances within one penny of one another.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>java.lang.Integer</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#distributeRemainderNearlyEqual-java.lang.Integer-">distributeRemainderNearlyEqual</a></span>(java.lang.Integer&nbsp;remainder)</code>
<div class="block">Distribute a penny from a remainder to nearly equal balances, then return the decremented
 remainder.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#equal--">equal</a></span>()</code>
<div class="block">Are the balance values all the same?</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#equalize--">equalize</a></span>()</code>
<div class="block">Equalize the balances by shifting pennies between the accounts until the account balances are
 equal or differ by at most a penny.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/Account.html" title="class in com.poesys.accounting.dataloader.newaccounting">Account</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#getAccount-java.lang.Integer-">getAccount</a></span>(java.lang.Integer&nbsp;remainder)</code>
<div class="block">Based on the current remainder, get the appropriate account to which to distribute part of the
 remainder.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>java.lang.Integer</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#getAmount--">getAmount</a></span>()</code>
<div class="block">Get the amount.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>java.math.BigDecimal</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#getBalance-com.poesys.accounting.dataloader.newaccounting.Account-">getBalance</a></span>(<a href="../../../../../com/poesys/accounting/dataloader/newaccounting/Account.html" title="class in com.poesys.accounting.dataloader.newaccounting">Account</a>&nbsp;account)</code>
<div class="block">Get the current balance for an account as a BigDecimal monetary amount (scale SCALE).</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>java.math.BigDecimal</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#getItemAmount-com.poesys.accounting.dataloader.newaccounting.Account-">getItemAmount</a></span>(<a href="../../../../../com/poesys/accounting/dataloader/newaccounting/Account.html" title="class in com.poesys.accounting.dataloader.newaccounting">Account</a>&nbsp;account)</code>
<div class="block">Get the current item amount for an account as a BigDecimal monetary amount (scale SCALE).</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/Account.html" title="class in com.poesys.accounting.dataloader.newaccounting">Account</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#getMaximumBalanceAccount--">getMaximumBalanceAccount</a></span>()</code>
<div class="block">Get the account that contains the maximum balance.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/Account.html" title="class in com.poesys.accounting.dataloader.newaccounting">Account</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#getMinimumBalanceAccount--">getMinimumBalanceAccount</a></span>()</code>
<div class="block">Get the account that contains the minimum balance.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#isValid--">isValid</a></span>()</code>
<div class="block">There must be at least one balance.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>java.lang.Integer</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html#setBalanceAndDecrementRemainder-java.lang.Integer-com.poesys.accounting.dataloader.newaccounting.Account-">setBalanceAndDecrementRemainder</a></span>(java.lang.Integer&nbsp;remainder,
                               <a href="../../../../../com/poesys/accounting/dataloader/newaccounting/Account.html" title="class in com.poesys.accounting.dataloader.newaccounting">Account</a>&nbsp;account)</code>
<div class="block">Compute a revised balance for an account from a remainder and set that balance into the
 balances map, then return the decremented remainder.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="logger">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logger</h4>
<pre>private static final&nbsp;org.apache.log4j.Logger logger</pre>
<div class="block">logger for this class</div>
</li>
</ul>
<a name="amount">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>amount</h4>
<pre>protected&nbsp;java.lang.Integer amount</pre>
<div class="block">the amount to distribute</div>
</li>
</ul>
<a name="balances">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>balances</h4>
<pre>protected final&nbsp;java.util.Map&lt;<a href="../../../../../com/poesys/accounting/dataloader/newaccounting/Account.html" title="class in com.poesys.accounting.dataloader.newaccounting">Account</a>,java.lang.Integer&gt; balances</pre>
<div class="block">map of integer balances indexed by Account</div>
</li>
</ul>
<a name="itemAmounts">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>itemAmounts</h4>
<pre>private final&nbsp;java.util.Map&lt;<a href="../../../../../com/poesys/accounting/dataloader/newaccounting/Account.html" title="class in com.poesys.accounting.dataloader.newaccounting">Account</a>,java.lang.Integer&gt; itemAmounts</pre>
<div class="block">map of decimal item credits/debit amounts indexed by Account</div>
</li>
</ul>
<a name="firstAccount">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>firstAccount</h4>
<pre>private&nbsp;<a href="../../../../../com/poesys/accounting/dataloader/newaccounting/Account.html" title="class in com.poesys.accounting.dataloader.newaccounting">Account</a> firstAccount</pre>
<div class="block">ordered list of balance accounts</div>
</li>
</ul>
<a name="SCALE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SCALE</h4>
<pre>protected static final&nbsp;int SCALE</pre>
<div class="block">the scale for BigDecimal values</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#com.poesys.accounting.dataloader.newaccounting.AccountCollectionDistributor.SCALE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="MULTIPLIER">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MULTIPLIER</h4>
<pre>private static final&nbsp;java.math.BigDecimal MULTIPLIER</pre>
<div class="block">the multiplier that converts a BigDecimal monetary amount to integer</div>
</li>
</ul>
<a name="PENNY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>PENNY</h4>
<pre>private static final&nbsp;java.lang.Integer PENNY</pre>
<div class="block">the amount by which accounts may differ</div>
</li>
</ul>
<a name="INVALID_COLLECTION_ERROR">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>INVALID_COLLECTION_ERROR</h4>
<pre>private static final&nbsp;java.lang.String INVALID_COLLECTION_ERROR</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#com.poesys.accounting.dataloader.newaccounting.AccountCollectionDistributor.INVALID_COLLECTION_ERROR">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="NULL_ACCOUNT_ERROR">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NULL_ACCOUNT_ERROR</h4>
<pre>private static final&nbsp;java.lang.String NULL_ACCOUNT_ERROR</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#com.poesys.accounting.dataloader.newaccounting.AccountCollectionDistributor.NULL_ACCOUNT_ERROR">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="NULL_BALANCE_ERROR">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NULL_BALANCE_ERROR</h4>
<pre>private static final&nbsp;java.lang.String NULL_BALANCE_ERROR</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#com.poesys.accounting.dataloader.newaccounting.AccountCollectionDistributor.NULL_BALANCE_ERROR">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="ACCOUNT_NOT_ADDED_ERROR">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ACCOUNT_NOT_ADDED_ERROR</h4>
<pre>private static final&nbsp;java.lang.String ACCOUNT_NOT_ADDED_ERROR</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#com.poesys.accounting.dataloader.newaccounting.AccountCollectionDistributor.ACCOUNT_NOT_ADDED_ERROR">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="NO_BALANCE_ERROR">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NO_BALANCE_ERROR</h4>
<pre>private static final&nbsp;java.lang.String NO_BALANCE_ERROR</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#com.poesys.accounting.dataloader.newaccounting.AccountCollectionDistributor.NO_BALANCE_ERROR">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="NO_AMOUNT_ERROR">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NO_AMOUNT_ERROR</h4>
<pre>private static final&nbsp;java.lang.String NO_AMOUNT_ERROR</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#com.poesys.accounting.dataloader.newaccounting.AccountCollectionDistributor.NO_AMOUNT_ERROR">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="NO_BALANCES_ERROR">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>NO_BALANCES_ERROR</h4>
<pre>private static final&nbsp;java.lang.String NO_BALANCES_ERROR</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../../constant-values.html#com.poesys.accounting.dataloader.newaccounting.AccountCollectionDistributor.NO_BALANCES_ERROR">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="AccountCollectionDistributor-java.math.BigDecimal-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AccountCollectionDistributor</h4>
<pre>public&nbsp;AccountCollectionDistributor(java.math.BigDecimal&nbsp;amount)</pre>
<div class="block">Create a AccountCollectionDistributor object.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>amount</code> - the amount to distribute</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getAmount--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAmount</h4>
<pre>public&nbsp;java.lang.Integer&nbsp;getAmount()</pre>
<div class="block">Get the amount.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a monetary amount</dd>
</dl>
</li>
</ul>
<a name="addBalance-com.poesys.accounting.dataloader.newaccounting.Account-java.math.BigDecimal-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addBalance</h4>
<pre>public&nbsp;void&nbsp;addBalance(<a href="../../../../../com/poesys/accounting/dataloader/newaccounting/Account.html" title="class in com.poesys.accounting.dataloader.newaccounting">Account</a>&nbsp;account,
                       java.math.BigDecimal&nbsp;balance)</pre>
<div class="block">Add an account and its current balance to the balance map, converting the BigDecimal monetary
 amount (scale SCALE) into an integer amount for computation with integer arithmetic. Add the
 account to the ordered list of accounts, which imposes an order on the set of accounts.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>account</code> - the account that has the balance</dd>
<dd><code>balance</code> - the decimal monetary amount (scale SCALE)</dd>
</dl>
</li>
</ul>
<a name="getBalance-com.poesys.accounting.dataloader.newaccounting.Account-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBalance</h4>
<pre>public&nbsp;java.math.BigDecimal&nbsp;getBalance(<a href="../../../../../com/poesys/accounting/dataloader/newaccounting/Account.html" title="class in com.poesys.accounting.dataloader.newaccounting">Account</a>&nbsp;account)</pre>
<div class="block">Get the current balance for an account as a BigDecimal monetary amount (scale SCALE).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>account</code> - the account for which to get the balance</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the balance as a monetary amount (scale SCALE)</dd>
</dl>
</li>
</ul>
<a name="getItemAmount-com.poesys.accounting.dataloader.newaccounting.Account-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getItemAmount</h4>
<pre>public&nbsp;java.math.BigDecimal&nbsp;getItemAmount(<a href="../../../../../com/poesys/accounting/dataloader/newaccounting/Account.html" title="class in com.poesys.accounting.dataloader.newaccounting">Account</a>&nbsp;account)</pre>
<div class="block">Get the current item amount for an account as a BigDecimal monetary amount (scale SCALE).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>account</code> - the account for which to get the amount</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the balance as a monetary amount (scale SCALE)</dd>
</dl>
</li>
</ul>
<a name="isValid--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isValid</h4>
<pre>public&nbsp;boolean&nbsp;isValid()</pre>
<div class="block">There must be at least one balance. Compare the balances; all should be equal or differ by at
 most one penny.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if balances are equal or near-equal, false if not</dd>
</dl>
</li>
</ul>
<a name="equalize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>equalize</h4>
<pre>public&nbsp;boolean&nbsp;equalize()</pre>
<div class="block">Equalize the balances by shifting pennies between the accounts until the account balances are
 equal or differ by at most a penny. The direction of penny-shifting depends on the sign of the
 balances, negative or positive.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if balances were equalized, false if they were unchanged</dd>
</dl>
</li>
</ul>
<a name="distributeAmount--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>distributeAmount</h4>
<pre>public&nbsp;void&nbsp;distributeAmount()</pre>
<div class="block">Distribute the amount across the current set of account balances, changing the balances to the
 distributed amounts plus the original amounts. This distributes an equal amount, leaving a
 remainder of zero or more pennies. This method does not distribute the remainder, to simplify
 unit testing. The method updates both the balances and the item amounts for the distributor.</div>
</li>
</ul>
<a name="distributeRemainder--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>distributeRemainder</h4>
<pre>public&nbsp;void&nbsp;distributeRemainder()</pre>
<div class="block">Distribute the number of pennies remaining after the main distribution across the current set
 of account balances, keeping the balances within one penny of one another. The remainder can be
 positive or negative, and the balances can be positive, negative, or zero; the logic depends on
 the various combinations of these states. Also note that the remainder logic dictates that
 there must be at least two balances for there to be a remainder, as x%1 never produces a
 remainder.</div>
</li>
</ul>
<a name="distributePennyFromRemainder-java.lang.Integer-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>distributePennyFromRemainder</h4>
<pre>private&nbsp;void&nbsp;distributePennyFromRemainder(java.lang.Integer&nbsp;remainder)</pre>
<div class="block">Recursive method that distributes one penny for each recursion until the remainder is gone. The
 method ensures that the set of balances stays equal or nearly equal. Keep this private to hide
 the recursion structure.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>remainder</code> - the current remainder</dd>
</dl>
</li>
</ul>
<a name="distributeRemainderNearlyEqual-java.lang.Integer-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>distributeRemainderNearlyEqual</h4>
<pre>public&nbsp;java.lang.Integer&nbsp;distributeRemainderNearlyEqual(java.lang.Integer&nbsp;remainder)</pre>
<div class="block">Distribute a penny from a remainder to nearly equal balances, then return the decremented
 remainder. If the remainder is zero, the method just returns the current remainder.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>remainder</code> - the current remainder</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the remainder after distribution</dd>
</dl>
</li>
</ul>
<a name="getAccount-java.lang.Integer-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAccount</h4>
<pre>public&nbsp;<a href="../../../../../com/poesys/accounting/dataloader/newaccounting/Account.html" title="class in com.poesys.accounting.dataloader.newaccounting">Account</a>&nbsp;getAccount(java.lang.Integer&nbsp;remainder)</pre>
<div class="block">Based on the current remainder, get the appropriate account to which to distribute part of the
 remainder.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>remainder</code> - the current remainder</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the account to which to distribute a penny or null if the remainder was zero</dd>
</dl>
</li>
</ul>
<a name="setBalanceAndDecrementRemainder-java.lang.Integer-com.poesys.accounting.dataloader.newaccounting.Account-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setBalanceAndDecrementRemainder</h4>
<pre>public&nbsp;java.lang.Integer&nbsp;setBalanceAndDecrementRemainder(java.lang.Integer&nbsp;remainder,
                                                         <a href="../../../../../com/poesys/accounting/dataloader/newaccounting/Account.html" title="class in com.poesys.accounting.dataloader.newaccounting">Account</a>&nbsp;account)</pre>
<div class="block">Compute a revised balance for an account from a remainder and set that balance into the
 balances map, then return the decremented remainder. If there is no balance for the specified
 account, the method throws a RuntimeException. The method adds a penny to the balance and
 decrements a penny from the remainder.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>remainder</code> - the current remainder</dd>
<dd><code>account</code> - the account to set</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the decremented remainder</dd>
</dl>
</li>
</ul>
<a name="getMaximumBalanceAccount--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaximumBalanceAccount</h4>
<pre>public&nbsp;<a href="../../../../../com/poesys/accounting/dataloader/newaccounting/Account.html" title="class in com.poesys.accounting.dataloader.newaccounting">Account</a>&nbsp;getMaximumBalanceAccount()</pre>
<div class="block">Get the account that contains the maximum balance. If several balances have this maximum,
 return the first one found. If there are no balances at all, the method throws a
 RuntimeException.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the account containing the maximum balance</dd>
</dl>
</li>
</ul>
<a name="getMinimumBalanceAccount--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMinimumBalanceAccount</h4>
<pre>public&nbsp;<a href="../../../../../com/poesys/accounting/dataloader/newaccounting/Account.html" title="class in com.poesys.accounting.dataloader.newaccounting">Account</a>&nbsp;getMinimumBalanceAccount()</pre>
<div class="block">Get the account that contains the minimum balance. If several balances have this minimum,
 return the first one found.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the account containing the minimum balance</dd>
</dl>
</li>
</ul>
<a name="equal--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>equal</h4>
<pre>public&nbsp;boolean&nbsp;equal()</pre>
<div class="block">Are the balance values all the same?</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if all the integers are the same, false if not</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AccountCollectionDistributor.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/Account.html" title="class in com.poesys.accounting.dataloader.newaccounting"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../com/poesys/accounting/dataloader/newaccounting/AccountGroup.html" title="class in com.poesys.accounting.dataloader.newaccounting"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/poesys/accounting/dataloader/newaccounting/AccountCollectionDistributor.html" target="_top">Frames</a></li>
<li><a href="AccountCollectionDistributor.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
